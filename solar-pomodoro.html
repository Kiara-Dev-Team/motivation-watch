<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solar System Pomodoro Timer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: #000;
      overflow: hidden;
      font-family: Arial, Helvetica, sans-serif;
    }
    
    canvas { 
      display: block;
      position: absolute;
      top: 0;
      left: 0;
    }
    
    /* Settings icon */
    .settings-icon {
      position: absolute;
      bottom: 40px;
      left: 40px;
      width: 50px;
      height: 50px;
      cursor: pointer;
      z-index: 100;
      transition: transform 0.3s;
    }
    
    .settings-icon:hover {
      transform: rotate(45deg);
    }
    
    .settings-icon svg {
      width: 100%;
      height: 100%;
      fill: rgba(255,255,255,0.7);
    }
    
    .settings-icon:hover svg {
      fill: rgba(255,255,255,1);
    }
    
    /* Timer display container */
    .timer-container {
      position: absolute;
      bottom: 40px;
      right: 40px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 20px;
      z-index: 100;
    }
    
    .timer-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .digit-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .colon {
      display: flex;
      flex-direction: column;
      gap: 40px;
      padding: 0 10px;
    }
    
    .colon-dot {
      width: 16px;
      height: 16px;
      background: #fff;
    }
    
    .controls {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    button {
      padding: 12px 30px;
      font-size: 18px;
      font-weight: bold;
      border: 3px solid #fff;
      background: transparent;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    button:hover {
      background: #fff;
      color: #000;
    }
    
    .expired .segment.on {
      fill: #ff0000;
    }
    
    .expired .colon-dot {
      background: #ff0000;
      animation: blink 0.5s infinite;
    }
    
    @keyframes blink {
      50% { opacity: 0.3; }
    }
    
    /* Info overlay */
    .info {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      font-size: 14px;
      background: rgba(0,0,0,0.5);
      padding: 10px 15px;
      border-radius: 5px;
      z-index: 100;
    }
  </style>
</head>
<body>
  <!-- Info overlay -->
  <div class="info">
    Solar System - Pomodoro Timer<br>
    Scroll to zoom
  </div>

  <!-- Settings icon -->
  <div class="settings-icon">
    <svg viewBox="0 0 24 24">
      <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
    </svg>
  </div>

  <!-- Timer container -->
  <div class="timer-container" id="container">
    <div class="timer-display">
      <div class="digit-group">
        <svg class="digit" id="min1" width="80" height="140" viewBox="0 0 80 140"></svg>
        <svg class="digit" id="min2" width="80" height="140" viewBox="0 0 80 140"></svg>
      </div>
      <div class="colon">
        <div class="colon-dot"></div>
        <div class="colon-dot"></div>
      </div>
      <div class="digit-group">
        <svg class="digit" id="sec1" width="80" height="140" viewBox="0 0 80 140"></svg>
        <svg class="digit" id="sec2" width="80" height="140" viewBox="0 0 80 140"></svg>
      </div>
    </div>
    
    <div class="controls">
      <button id="startBtn">START</button>
      <button id="resetBtn">RESET</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // ========== SOLAR SYSTEM SETUP ==========
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);
    camera.position.set(0, 150, 0);
    camera.lookAt(0, 0, 0);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Create sun
    const sunGeometry = new THREE.SphereGeometry(5, 32, 32);
    const sunMaterial = new THREE.MeshBasicMaterial({ 
      color: 0xffff00,
      emissive: 0xffaa00
    });
    const sun = new THREE.Mesh(sunGeometry, sunMaterial);
    scene.add(sun);

    const sunGlowGeometry = new THREE.SphereGeometry(7, 32, 32);
    const sunGlowMaterial = new THREE.MeshBasicMaterial({
      color: 0xffaa00,
      transparent: true,
      opacity: 0.3
    });
    const sunGlow = new THREE.Mesh(sunGlowGeometry, sunGlowMaterial);
    scene.add(sunGlow);

    const sunLight = new THREE.PointLight(0xffffff, 2, 500);
    scene.add(sunLight);

    // Planet data
    const planetData = [
      [0.8, 12, 0.006, 0x8c7853, 'Mercury'],
      [1.2, 18, 0.0045, 0xffd700, 'Venus'],
      [1.3, 25, 0.003, 0x4169e1, 'Earth'],
      [1.0, 32, 0.0024, 0xff4500, 'Mars'],
      [3.5, 48, 0.0012, 0xdaa520, 'Jupiter'],
      [3.0, 65, 0.0009, 0xf4a460, 'Saturn'],
      [2.0, 80, 0.0006, 0x4fd5d5, 'Uranus'],
      [2.0, 95, 0.0003, 0x4169e1, 'Neptune']
    ];

    const planets = [];
    const eccentricities = [0.206, 0.007, 0.017, 0.093, 0.048, 0.056, 0.047, 0.009];

    planetData.forEach((data, index) => {
      const [size, distance, speed, color, name] = data;
      
      const geometry = new THREE.SphereGeometry(size, 32, 32);
      const material = new THREE.MeshStandardMaterial({ 
        color: color, 
        roughness: 0.7, 
        metalness: 0.3,
        emissive: color,
        emissiveIntensity: 0.2
      });
      const planet = new THREE.Mesh(geometry, material);
      
      // Add glow
      const glowGeometry = new THREE.SphereGeometry(size * 1.15, 32, 32);
      const glowMaterial = new THREE.MeshBasicMaterial({
        color: color, 
        transparent: true, 
        opacity: 0.15, 
        side: THREE.BackSide
      });
      const glow = new THREE.Mesh(glowGeometry, glowMaterial);
      planet.add(glow);
      
      // Orbit path
      const eccentricity = eccentricities[index];
      const orbitGeometry = new THREE.BufferGeometry();
      const orbitPoints = [];
      const segments = 128;
      
      for (let i = 0; i <= segments; i++) {
        const angle = (i / segments) * Math.PI * 2;
        const r = distance * (1 - eccentricity * eccentricity) / (1 + eccentricity * Math.cos(angle));
        orbitPoints.push(Math.cos(angle) * r, 0, Math.sin(angle) * r);
      }
      
      orbitGeometry.setAttribute('position', new THREE.Float32BufferAttribute(orbitPoints, 3));
      const orbitMaterial = new THREE.LineBasicMaterial({ 
        color: 0x555555,
        transparent: true,
        opacity: 0.5
      });
      const orbit = new THREE.Line(orbitGeometry, orbitMaterial);
      scene.add(orbit);
      
      planets.push({
        mesh: planet, 
        distance: distance, 
        speed: speed,
        angle: Math.random() * Math.PI * 2, 
        name: name
      });
      
      scene.add(planet);
    });

    // Saturn's rings
    const saturnRingGeometry = new THREE.RingGeometry(4.5, 7, 64);
    const saturnRingMaterial = new THREE.MeshBasicMaterial({
      color: 0xe8d5b7, 
      side: THREE.DoubleSide, 
      transparent: true, 
      opacity: 0.7
    });
    const saturnRing = new THREE.Mesh(saturnRingGeometry, saturnRingMaterial);
    saturnRing.rotation.x = Math.PI / 2 + 0.3;
    planets[5].ring = saturnRing;

    // Add ambient light
    const ambientLight = new THREE.AmbientLight(0x333333);
    scene.add(ambientLight);

    // Zoom control
    let cameraDistance = 150;
    renderer.domElement.addEventListener('wheel', (e) => {
      e.preventDefault();
      cameraDistance += e.deltaY * 0.1;
      cameraDistance = Math.max(50, Math.min(400, cameraDistance));
      camera.position.y = cameraDistance;
    });

    // Animation loop
    function animateSolarSystem() {
      requestAnimationFrame(animateSolarSystem);
      
      sun.rotation.y += 0.0003;
      sunGlow.rotation.y += 0.0003;
      
      planets.forEach((planet) => {
        planet.angle += planet.speed;
        planet.mesh.position.x = Math.cos(planet.angle) * planet.distance;
        planet.mesh.position.z = Math.sin(planet.angle) * planet.distance;
        planet.mesh.rotation.y += 0.003;
        
        if (planet.ring) {
          planet.ring.position.copy(planet.mesh.position);
          planet.ring.rotation.z += 0.0003;
          if (!scene.children.includes(planet.ring)) {
            scene.add(planet.ring);
          }
        }
      });
      
      renderer.render(scene, camera);
    }

    animateSolarSystem();

    // Resize handler
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // ========== POMODORO TIMER ==========
    const TOTAL_TIME = 25 * 60 * 1000;
    let remaining = TOTAL_TIME;
    let interval = null;
    let lastTime = null;
    
    const patterns = {
      0: [1,1,1,1,1,1,0],
      1: [0,1,1,0,0,0,0],
      2: [1,1,0,1,1,0,1],
      3: [1,1,1,1,0,0,1],
      4: [0,1,1,0,0,1,1],
      5: [1,0,1,1,0,1,1],
      6: [1,0,1,1,1,1,1],
      7: [1,1,1,0,0,0,0],
      8: [1,1,1,1,1,1,1],
      9: [1,1,1,1,0,1,1]
    };
    
    const segmentPaths = {
      a: 'M 12,8 L 18,2 L 62,2 L 68,8 L 62,14 L 18,14 Z',
      b: 'M 70,12 L 74,18 L 74,62 L 70,68 L 64,62 L 64,18 Z',
      c: 'M 70,76 L 74,82 L 74,126 L 70,132 L 64,126 L 64,82 Z',
      d: 'M 12,132 L 18,126 L 62,126 L 68,132 L 62,138 L 18,138 Z',
      e: 'M 10,76 L 16,82 L 16,126 L 10,132 L 6,126 L 6,82 Z',
      f: 'M 10,12 L 16,18 L 16,62 L 10,68 L 6,62 L 6,18 Z',
      g: 'M 10,70 L 18,64 L 62,64 L 70,70 L 62,76 L 18,76 Z'
    };
    
    function createDigit(svgElement) {
      svgElement.innerHTML = '';
      const segmentNames = ['a','b','c','d','e','f','g'];
      
      segmentNames.forEach(name => {
        const bgPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        bgPath.setAttribute('d', segmentPaths[name]);
        bgPath.setAttribute('fill', 'rgba(255,255,255,0.08)');
        bgPath.classList.add('segment-bg');
        svgElement.appendChild(bgPath);
        
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', segmentPaths[name]);
        path.setAttribute('fill', '#fff');
        path.classList.add('segment', `seg-${name}`);
        svgElement.appendChild(path);
      });
    }
    
    function setDigit(svgElement, num) {
      const pattern = patterns[num];
      const segmentNames = ['a','b','c','d','e','f','g'];
      
      segmentNames.forEach((name, i) => {
        const segment = svgElement.querySelector(`.seg-${name}`);
        if (pattern[i]) {
          segment.classList.add('on');
          segment.setAttribute('fill', '#fff');
        } else {
          segment.classList.remove('on');
          segment.setAttribute('fill', 'transparent');
        }
      });
    }
    
    const min1El = document.getElementById('min1');
    const min2El = document.getElementById('min2');
    const sec1El = document.getElementById('sec1');
    const sec2El = document.getElementById('sec2');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const container = document.getElementById('container');
    
    [min1El, min2El, sec1El, sec2El].forEach(createDigit);
    
    function updateDisplay() {
      const totalSec = Math.max(0, Math.ceil(remaining / 1000));
      const min = Math.floor(totalSec / 60);
      const sec = totalSec % 60;
      
      setDigit(min1El, Math.floor(min / 10));
      setDigit(min2El, min % 10);
      setDigit(sec1El, Math.floor(sec / 10));
      setDigit(sec2El, sec % 10);
      
      if (remaining <= 0) {
        container.classList.add('expired');
      } else {
        container.classList.remove('expired');
      }
    }
    
    function tick() {
      const now = performance.now();
      const delta = now - lastTime;
      lastTime = now;
      remaining -= delta;
      
      if (remaining <= 0) {
        remaining = 0;
        clearInterval(interval);
        interval = null;
        startBtn.textContent = 'START';
      }
      
      updateDisplay();
    }
    
    startBtn.addEventListener('click', () => {
      if (interval) {
        clearInterval(interval);
        interval = null;
        startBtn.textContent = 'START';
      } else {
        if (remaining <= 0) remaining = TOTAL_TIME;
        lastTime = performance.now();
        interval = setInterval(tick, 100);
        startBtn.textContent = 'PAUSE';
      }
    });
    
    resetBtn.addEventListener('click', () => {
      clearInterval(interval);
      interval = null;
      remaining = TOTAL_TIME;
      startBtn.textContent = 'START';
      container.classList.remove('expired');
      updateDisplay();
    });
    
    updateDisplay();
  </script>
</body>
</html>